package com.swabhav.GuitarFinal.test;

import java.util.*;

import com.swabhav.GuitarFinal.model.*;

public class GuitarMain {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        GuitarInventory inventory = new GuitarInventory();
        initializeInventory(inventory);

        while (true) {
            System.out.println("\nGuitar Inventory Menu:");
            System.out.println("1.Search for Guitar");
            System.out.println("2.Exit");
            System.out.print("Enter your choice: ");

            String input = sc.nextLine().trim();
            if (input.equals("2")) {
                System.out.println("Exiting. Thank you!");
                break;
            }

            if (!input.equals("1")) {
                System.out.println("Invalid choice. Try again.");
                continue;
            }

            GuitarSpec searchSpec = getUserSearchSpec(sc);
            if (searchSpec == null) {
                System.out.println("Could not create search spec. Please try again.\n");
                continue;
            }

            List<Final_Guitar> results = inventory.search(searchSpec);

            if (results.isEmpty()) {
                System.out.println("No matching guitars found.");
            } else {
                System.out.println("\nMatching Guitars:");
                for (Final_Guitar guitar : results) {
                    GuitarSpec spec = guitar.getSpec();
                    System.out.println("------------------------------------");
                    System.out.println("Serial Number: " + guitar.getSerialNumber());
                    System.out.println("Price: â‚¹" + guitar.getPrice());
                    System.out.println("Builder: " + spec.getBuilder());
                    System.out.println("Model: " + spec.getModel());
                    System.out.println("Type: " + spec.getType());
                    System.out.println("Back Wood: " + spec.getBackwood());
                    System.out.println("Top Wood: " + spec.getTopwood());
                    System.out.println("Number of Strings: " + spec.getNumStrings());
                }
            }
        }

        sc.close();
    }

    private static GuitarSpec getUserSearchSpec(Scanner sc) {
        try {
            System.out.println("\nEnter Guitar Search Specifications");

            System.out.print("Builder (FENDER, MARTIN, GIBSON, COLLINGS, OLSON, RYAN, PRS, ANY): ");
            Builder builder = Builder.valueOf(sc.nextLine().trim().toUpperCase());

            System.out.print("Model: ");
            String model = sc.nextLine().trim();

            System.out.print("Number of Strings (e.g. 6, 12): ");
            int numStrings = Integer.parseInt(sc.nextLine().trim());

            System.out.print("Type (ACOUSTIC or ELECTRIC): ");
            Type type = Type.valueOf(sc.nextLine().trim().toUpperCase());

            System.out.print("Back Wood (INDIAN_ROSEWOOD, BRAZILIAN_ROSEWOOD, MAHOGANY, MAPL, COCOBOLO, CEDAR): ");
            Wood backWood = Wood.valueOf(sc.nextLine().trim().toUpperCase());

            System.out.print("Top Wood (INDIAN_ROSEWOOD, BRAZILIAN_ROSEWOOD, MAHOGANY, MAPL, COCOBOLO, CEDAR): ");
            Wood topWood = Wood.valueOf(sc.nextLine().trim().toUpperCase());

            return new GuitarSpec(builder, model, numStrings, type, backWood, topWood);

        } catch (IllegalArgumentException | InputMismatchException e) {
            System.out.println("Invalid input: " + e.getMessage());
            return null;
        }
    }


    private static void initializeInventory(GuitarInventory inventory) {
        inventory.addGuitar("GTR001", 15000.0,
                new GuitarSpec(Builder.FENDER, "Stratocaster", 6, Type.ELECTRIC, Wood.COCOBOLO, Wood.CEDAR));
        inventory.addGuitar("GTR002", 18000.0,
                new GuitarSpec(Builder.MARTIN, "D-28", 6, Type.ACOUSTIC, Wood.MAPL, Wood.MAPL));
        inventory.addGuitar("GTR003", 20000.0,
                new GuitarSpec(Builder.GIBSON, "Les Paul", 6, Type.ELECTRIC, Wood.MAHOGANY, Wood.MAHOGANY));
        inventory.addGuitar("GTR004", 17000.0,
                new GuitarSpec(Builder.FENDER, "Stratocaster", 6, Type.ELECTRIC, Wood.COCOBOLO, Wood.CEDAR));
    }
}

